import jlib from 'jingtum-lib';
import ipfsAPI from 'ipfs-api';
import mysql from 'mysql';
import sqlText from 'node-transform-mysql';

import * as requestInfo from '../utils/jingtum/requestInfo.js';
import * as contract from '../utils/jingtum/contract.js';
import * as ipfsUtils from '../utils/ipfsUtils.js';
import * as mysqlUtils from '../utils/mysqlUtils.js';

import {chains, ipfsConf, mysqlConf} from '../utils/info.js';

const ipfs = ipfsAPI(ipfsConf); // ipfs连接
const c = mysql.createConnection(mysqlConf);
c.connect(); // mysql连接
const contractChain = chains[1];
const platformAddr = contractChain.account.a[5].address;
const platformSecret = contractChain.account.a[5].secret;

const abi = [{"constant":false,"inputs":[{"name":"order_id","type":"uint256"},{"name":"asset_id","type":"uint256"},{"name":"asset_type","type":"uint8"},{"name":"consumable","type":"bool"},{"name":"expire_time","type":"uint256"},{"name":"other_clauses","type":"string"}],"name":"makeOrder","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"offset","type":"uint256"}],"name":"listOrders","outputs":[{"name":"","type":"uint256[10]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"order_id","type":"uint256"}],"name":"cancelOrder","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_addr","type":"address"}],"name":"addAdmin","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_addr","type":"address"}],"name":"addChecker","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"order_id","type":"uint256"},{"name":"label_ref","type":"uint256"},{"name":"price_ref","type":"uint256"}],"name":"updateAdditionInfoRef","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"order_id","type":"uint256"}],"name":"getOrderInfo","outputs":[{"components":[{"components":[{"name":"asset_id","type":"uint256"},{"name":"asset_type","type":"uint8"},{"name":"consumable","type":"bool"}],"name":"order_type","type":"tuple"},{"name":"expire_time","type":"uint256"},{"name":"label_ref","type":"uint256"},{"name":"price_ref","type":"uint256"},{"name":"other_clause","type":"string"},{"name":"status","type":"bool"}],"name":"","type":"tuple"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getTimeStamp","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"order_id","type":"uint256"},{"name":"taker_address","type":"address"},{"name":"mono","type":"bool"}],"name":"commitOrder","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"order_id","type":"uint256"},{"name":"expire_time","type":"uint256"},{"name":"other_clauses","type":"string"}],"name":"makeBuyIntention","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}];

const payload = '60806040526000339050806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055506001600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050611b05806101086000396000f3fe608060405234801561001057600080fd5b50600436106100bb576000357c010000000000000000000000000000000000000000000000000000000090048063ab1d676c11610083578063ab1d676c14610160578063d311636b1461017c578063da235b22146101ac578063ef66d5e5146101ca578063efb16a65146101e6576100bb565b80630fcd7944146100c057806345eb9af9146100dc578063514fcac71461010c5780637048027514610128578063916473ab14610144575b600080fd5b6100da60048036036100d591908101906114d2565b610202565b005b6100f660048036036100f1919081019061139f565b61052a565b60405161010391906118a9565b60405180910390f35b6101266004803603610121919081019061139f565b6105ab565b005b610142600480360361013d9190810190611376565b610752565b005b61015e60048036036101599190810190611376565b6107ef565b005b61017a60048036036101759190810190611483565b61088c565b005b6101966004803603610191919081019061139f565b6109c3565b6040516101a391906119a5565b60405180910390f35b6101b4610b23565b6040516101c191906119c7565b60405180910390f35b6101e460048036036101df91908101906113c8565b610b2b565b005b61020060048036036101fb9190810190611417565b610e06565b005b60011515600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515141515610297576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161028e90611925565b60405180910390fd5b866003600082815260200190815260200160002060060160009054906101000a900460ff161515156102fe576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102f590611945565b60405180910390fd5b60028660ff1614158061030e5750845b151561034f576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161034690611965565b60405180910390fd5b6103576110ed565b6060604051908101604052808981526020018860ff1681526020018715158152509050610382611114565b60c0604051908101604052808381526020014288018152602001600081526020016000815260200186868080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050815260200160011515815250905080600360008c81526020019081526020016000206000820151816000016000820151816000015560208201518160010160006101000a81548160ff021916908360ff16021790555060408201518160010160016101000a81548160ff021916908315150217905550505060208201518160020155604082015181600301556060820151816004015560808201518160050190805190602001906104a1929190611154565b5060a08201518160060160006101000a81548160ff0219169083151502179055509050506104cd6111d4565b6020604051908101604052905080600460008d815260200190815260200160002090505060058b90806001815401808255809150509060018203906000526020600020016000909192909190915055505050505050505050505050565b6105326111e2565b600060058054905090506105446111e2565b60008090505b8285820110801561055b5750600a81105b156105a057600585820181548110151561057157fe5b90600052602060002001548282600a8110151561058a57fe5b602002018181525050808060010191505061054a565b508092505050919050565b60011515600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515141515610640576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161063790611925565b60405180910390fd5b806003600082815260200190815260200160002060060160009054906101000a900460ff1615156106a6576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161069d906118c5565b60405180910390fd5b6003600083815260200190815260200160002060008082016000808201600090556001820160006101000a81549060ff02191690556001820160016101000a81549060ff021916905550506002820160009055600382016000905560048201600090556005820160006107199190611206565b6006820160006101000a81549060ff02191690555050600460008381526020019081526020016000205061074e600583610f4b565b5050565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161415156107e3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107da90611905565b60405180910390fd5b6107ec8161102f565b50565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141515610880576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161087790611905565b60405180910390fd5b61088981611093565b50565b60011515600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515141515610921576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161091890611925565b60405180910390fd5b826003600082815260200190815260200160002060060160009054906101000a900460ff161515610987576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161097e906118c5565b60405180910390fd5b82600360008681526020019081526020016000206003018190555081600360008681526020019081526020016000206004018190555050505050565b6109cb611114565b6003600083815260200190815260200160002060c060405190810160405290816000820160606040519081016040529081600082015481526020016001820160009054906101000a900460ff1660ff1660ff1681526020016001820160019054906101000a900460ff1615151515815250508152602001600282015481526020016003820154815260200160048201548152602001600582018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610af85780601f10610acd57610100808354040283529160200191610af8565b820191906000526020600020905b815481529060010190602001808311610adb57829003601f168201915b505050505081526020016006820160009054906101000a900460ff1615151515815250509050919050565b600042905090565b60011515600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff161515141515610bc0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bb790611925565b60405180910390fd5b826003600082815260200190815260200160002060060160009054906101000a900460ff161515610c26576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c1d906118c5565b60405180910390fd5b426004600086815260200190815260200160002060000160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000154111515610cc0576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cb7906118e5565b60405180910390fd5b6003600085815260200190815260200160002060000160010160019054906101000a900460ff1680610cef5750815b15610da1576003600085815260200190815260200160002060008082016000808201600090556001820160006101000a81549060ff02191690556001820160016101000a81549060ff02191690555050600282016000905560038201600090556004820160009055600582016000610d679190611206565b6006820160006101000a81549060ff021916905550506004600085815260200190815260200160002050610d9c600585610f4b565b610e00565b6004600085815260200190815260200160002060000160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008082016000905550505b50505050565b836003600082815260200190815260200160002060060160009054906101000a900460ff161515610e6c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e63906118c5565b60405180910390fd5b426003600087815260200190815260200160002060020154111515610ec6576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ebd90611985565b60405180910390fd5b610ece61124e565b6020604051908101604052808642018152509050806004600088815260200190815260200160002060000160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000155905050505050505050565b600080600090505b8380549050811015610fa757828482815481101515610f6e57fe5b90600052602060002001541415610f8757809150610fa7565b8380549050811415610f9a57505061102b565b8080600101915050610f53565b506001838054905003811415156110145760008190505b6001848054905003811015611012578360018201815481101515610fde57fe5b90600052602060002001548482815481101515610ff757fe5b90600052602060002001819055508080600101915050610fbe565b505b828054809190600190036110289190611262565b50505b5050565b6001600260008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555061109081611093565b50565b60018060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff02191690831515021790555050565b60606040519081016040528060008152602001600060ff1681526020016000151581525090565b6101006040519081016040528061112961128e565b8152602001600081526020016000815260200160008152602001606081526020016000151581525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061119557805160ff19168380011785556111c3565b828001600101855582156111c3579182015b828111156111c25782518255916020019190600101906111a7565b5b5090506111d091906112b5565b5090565b602060405190810160405290565b61014060405190810160405280600a90602082028038833980820191505090505090565b50805460018160011615610100020316600290046000825580601f1061122c575061124b565b601f01602090049060005260206000209081019061124a91906112b5565b5b50565b602060405190810160405280600081525090565b8154818355818111156112895781836000526020600020918201910161128891906112b5565b5b505050565b60606040519081016040528060008152602001600060ff1681526020016000151581525090565b6112d791905b808211156112d35760008160009055506001016112bb565b5090565b90565b60006112e68235611a52565b905092915050565b60006112fa8235611a64565b905092915050565b60008083601f840112151561131657600080fd5b8235905067ffffffffffffffff81111561132f57600080fd5b60208301915083600182028301111561134757600080fd5b9250929050565b600061135a8235611a70565b905092915050565b600061136e8235611a7a565b905092915050565b60006020828403121561138857600080fd5b6000611396848285016112da565b91505092915050565b6000602082840312156113b157600080fd5b60006113bf8482850161134e565b91505092915050565b6000806000606084860312156113dd57600080fd5b60006113eb8682870161134e565b93505060206113fc868287016112da565b925050604061140d868287016112ee565b9150509250925092565b6000806000806060858703121561142d57600080fd5b600061143b8782880161134e565b945050602061144c8782880161134e565b935050604085013567ffffffffffffffff81111561146957600080fd5b61147587828801611302565b925092505092959194509250565b60008060006060848603121561149857600080fd5b60006114a68682870161134e565b93505060206114b78682870161134e565b92505060406114c88682870161134e565b9150509250925092565b600080600080600080600060c0888a0312156114ed57600080fd5b60006114fb8a828b0161134e565b975050602061150c8a828b0161134e565b965050604061151d8a828b01611362565b955050606061152e8a828b016112ee565b945050608061153f8a828b0161134e565b93505060a088013567ffffffffffffffff81111561155c57600080fd5b6115688a828b01611302565b925092505092959891949750929550565b611582816119ec565b61158b826119e2565b60005b828110156115bd576115a185835161187c565b6115aa82611a02565b915060208501945060018101905061158e565b5050505050565b6115cd81611a0f565b82525050565b60006115de826119f7565b8084526115f2816020860160208601611a87565b6115fb81611aba565b602085010191505092915050565b6000601582527f4f7264657220646f6573206e6f742065786973742100000000000000000000006020830152604082019050919050565b6000601682527f496e74656e74696f6e2074696d652065787069726564000000000000000000006020830152604082019050919050565b6000602082527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726020830152604082019050919050565b6000601782527f43616c6c6572206973206e6f74207468652061646d696e0000000000000000006020830152604082019050919050565b6000601982527f4f726465722068617320616c72656164792065786973747321000000000000006020830152604082019050919050565b6000602d82527f546865206f72646572206f6620747970652032206173736574206d757374206260208301527f6520636f6e73756d61626c6521000000000000000000000000000000000000006040830152606082019050919050565b6000601182527f54696d652045787069726564206e6f77210000000000000000000000000000006020830152604082019050919050565b6060820160008201516117c6600085018261187c565b5060208201516117d9602085018261189a565b5060408201516117ec60408501826115c4565b50505050565b60006101008301600083015161180b60008601826117b0565b50602083015161181e606086018261187c565b506040830151611831608086018261187c565b50606083015161184460a086018261187c565b50608083015184820360c086015261185c82826115d3565b91505060a083015161187160e08601826115c4565b508091505092915050565b61188581611a3b565b82525050565b61189481611a3b565b82525050565b6118a381611a45565b82525050565b6000610140820190506118bf6000830184611579565b92915050565b600060208201905081810360008301526118de81611609565b9050919050565b600060208201905081810360008301526118fe81611640565b9050919050565b6000602082019050818103600083015261191e81611677565b9050919050565b6000602082019050818103600083015261193e816116ae565b9050919050565b6000602082019050818103600083015261195e816116e5565b9050919050565b6000602082019050818103600083015261197e8161171c565b9050919050565b6000602082019050818103600083015261199e81611779565b9050919050565b600060208201905081810360008301526119bf81846117f2565b905092915050565b60006020820190506119dc600083018461188b565b92915050565b6000819050919050565b6000600a9050919050565b600081519050919050565b6000602082019050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b600060ff82169050919050565b6000611a5d82611a1b565b9050919050565b60008115159050919050565b6000819050919050565b600060ff82169050919050565b60005b83811015611aa5578082015181840152602081019050611a8a565b83811115611ab4576000848401525b50505050565b6000601f19601f830116905091905056fea265627a7a7230582056a613b4b95334d1b4216ab8415d08c795fdf3641f8b4df64b1314de451462366c6578706572696d656e74616cf50037';

const Remote = jlib.Remote;
const contractRemote = new Remote({server: contractChain.server[0], local_sign: true});

contractRemote.connect(async function(err, res) {

    if(err) {
        return console.log('err: ', err);
    }
    else if(res) {
        console.log('connect: ', res);
    }

    let seq = (await requestInfo.requestAccountInfo(platformAddr, contractRemote, false)).account_data.Sequence;

    let deployRes = await contract.initContract(platformAddr, platformSecret, contractRemote, seq++, abi, payload, true);

    let contractAddr = deployRes.ContractState;
    let abiBuffer = Buffer.from(JSON.stringify(abi));
    let abiHash = await ipfsUtils.add(ipfs, abiBuffer);
    let contractInfo = {
        contract_addr: contractAddr,
        abi_hash: abiHash,
    }
    let sql = sqlText.table('contract_info').data(contractInfo).insert();
    await mysqlUtils.sql(c, sql);

    contractRemote.disconnect();

})


// import jlib from 'jingtum-lib';
// var Remote = jlib.Remote;
// var remote = new Remote({server: 'ws://39.102.92.229:6030', local_sign:true});
// remote.connect(function (err, result) {
//     if (err) {
//         return console.log('err:', err);
//     }
//      var v = {
//         address: 'jHb9CJAWyB4jr91VRWn96DkukG4bwdtyTh',
//         secret: 'snoPBjXtMeMyMHUVTgbuqAfg1SUTb'
// };
//     const abi = [
//         {
//             "constant": true,
//             "inputs": [],
//             "name": "name",
//             "outputs": [
//                 {
//                     "name": "",
//                     "type": "string"
//                 }
//             ],
//             "payable": false,
//             "stateMutability": "view",
//             "type": "function"
//         },
//         {
//             "constant": true,
//             "inputs": [],
//             "name": "totalSupply",
//             "outputs": [
//                 {
//                     "name": "",
//                     "type": "uint256"
//                 }
//             ],
//             "payable": false,
//             "stateMutability": "view",
//             "type": "function"
//         },
//         {
//             "constant": true,
//             "inputs": [],
//             "name": "decimals",
//             "outputs": [
//                 {
//                     "name": "",
//                     "type": "uint8"
//                 }
//             ],
//             "payable": false,
//             "stateMutability": "view",
//             "type": "function"
//         },
//         {
//             "constant": true,
//             "inputs": [
//                 {
//                     "name": "",
//                     "type": "address"
//                 }
//             ],
//             "name": "balanceOf",
//             "outputs": [
//                 {
//                     "name": "",
//                     "type": "uint256"
//                 }
//             ],
//             "payable": false,
//             "stateMutability": "view",
//             "type": "function"
//         },
//         {
//             "constant": true,
//             "inputs": [],
//             "name": "symbol",
//             "outputs": [
//                 {
//                     "name": "",
//                     "type": "string"
//                 }
//             ],
//             "payable": false,
//             "stateMutability": "view",
//             "type": "function"
//         },
//         {
//             "constant": false,
//             "inputs": [
//                 {
//                     "name": "_to",
//                     "type": "address"
//                 },
//                 {
//                     "name": "_value",
//                     "type": "uint256"
//                 }
//             ],
//             "name": "transfer",
//             "outputs": [],
//             "payable": false,
//             "stateMutability": "nonpayable",
//             "type": "function"
//         },
//         {
//             "constant": true,
//             "inputs": [
//                 {
//                     "name": "",
//                     "type": "address"
//                 },
//                 {
//                     "name": "",
//                     "type": "address"
//                 }
//             ],
//             "name": "allowance",
//             "outputs": [
//                 {
//                     "name": "",
//                     "type": "uint256"
//                 }
//             ],
//             "payable": false,
//             "stateMutability": "view",
//             "type": "function"
//         },
//         {
//             "inputs": [
//                 {
//                     "name": "initialSupply",
//                     "type": "uint256"
//                 },
//                 {
//                     "name": "tokenName",
//                     "type": "string"
//                 },
//                 {
//                     "name": "tokenSymbol",
//                     "type": "string"
//                 }
//             ],
//             "payable": false,
//             "stateMutability": "nonpayable",
//             "type": "constructor"
//         },
//         {
//             "payable": false,
//             "stateMutability": "nonpayable",
//             "type": "fallback"
//         }
//     ];
// var tx = remote.initContract({
// 	 account: v.address, 
//     amount: 10,
//     payload: '60606040526012600260006101000a81548160ff021916908360ff160217905550341561002b57600080fd5b60405161092738038061092783398101604052808051906020019091908051820191906020018051820191905050600260009054906101000a900460ff1660ff16600a0a8302600381905550600354600460003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208190555081600090805190602001906100d39291906100f3565b5080600190805190602001906100ea9291906100f3565b50505050610198565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061013457805160ff1916838001178555610162565b82800160010185558215610162579182015b82811115610161578251825591602001919060010190610146565b5b50905061016f9190610173565b5090565b61019591905b80821115610191576000816000905550600101610179565b5090565b90565b610780806101a76000396000f300606060405260043610610083576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde031461009357806318160ddd14610121578063313ce5671461014a57806370a082311461017957806395d89b41146101c6578063a9059cbb14610254578063dd62ed3e14610296575b341561008e57600080fd5b600080fd5b341561009e57600080fd5b6100a6610302565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156100e65780820151818401526020810190506100cb565b50505050905090810190601f1680156101135780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561012c57600080fd5b6101346103a0565b6040518082815260200191505060405180910390f35b341561015557600080fd5b61015d6103a6565b604051808260ff1660ff16815260200191505060405180910390f35b341561018457600080fd5b6101b0600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506103b9565b6040518082815260200191505060405180910390f35b34156101d157600080fd5b6101d96103d1565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156102195780820151818401526020810190506101fe565b50505050905090810190601f1680156102465780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561025f57600080fd5b610294600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061046f565b005b34156102a157600080fd5b6102ec600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061047e565b6040518082815260200191505060405180910390f35b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103985780601f1061036d57610100808354040283529160200191610398565b820191906000526020600020905b81548152906001019060200180831161037b57829003601f168201915b505050505081565b60035481565b600260009054906101000a900460ff1681565b60046020528060005260406000206000915090505481565b60018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156104675780601f1061043c57610100808354040283529160200191610467565b820191906000526020600020905b81548152906001019060200180831161044a57829003601f168201915b505050505081565b61047a3383836104a3565b5050565b6005602052816000526040600020602052806000526040600020600091509150505481565b6000808373ffffffffffffffffffffffffffffffffffffffff16141515156104ca57600080fd5b81600460008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541015151561051857600080fd5b600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205482600460008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054011115156105a657600080fd5b600460008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600460008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205401905081600460008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254019250508190555080600460008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054600460008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020540114151561074e57fe5b505050505600a165627a7a72305820b2665df0d8d8522803a19ac6bc98ff010121e11c16d0342eaced01d94100ce180029',
//    abi: abi,
//    params:[2000, 'TestCurrency', 'TEST1']
// });
//     tx.setSecret(v.secret);
//     tx.submit(function (err, result) {
//         if (err) {
//             console.log('err:', err);
//         }
//         else if (result) {
//             console.log('res:', result);
//         }
//     });
// });
